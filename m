Return-Path: <b.a.t.m.a.n-bounces@lists.open-mesh.org>
X-Original-To: lists+b.a.t.m.a.n@lfdr.de
Delivered-To: lists+b.a.t.m.a.n@lfdr.de
Received: from open-mesh.org (open-mesh.org [78.46.248.236])
	by mail.lfdr.de (Postfix) with ESMTPS id DB0B487405
	for <lists+b.a.t.m.a.n@lfdr.de>; Fri,  9 Aug 2019 10:28:27 +0200 (CEST)
Received: from open-mesh.org (localhost [IPv6:::1])
	by open-mesh.org (Postfix) with ESMTP id 60A0681C5F;
	Fri,  9 Aug 2019 10:28:24 +0200 (CEST)
Received: from s2.neomailbox.net (s2.neomailbox.net [5.148.176.60])
 by open-mesh.org (Postfix) with ESMTPS id 81C4F80231
 for <b.a.t.m.a.n@lists.open-mesh.org>; Fri,  9 Aug 2019 10:28:18 +0200 (CEST)
Subject: Re: batman_v default throughput
To: The list for a Better Approach To Mobile Ad-hoc Networking
 <b.a.t.m.a.n@lists.open-mesh.org>, Moritz Warning <moritzwarning@web.de>
References: <dc998970-a36c-cbb5-8de5-2ed2a3833d57@web.de>
From: Antonio Quartulli <a@unstable.cc>
Openpgp: preference=signencrypt
Autocrypt: addr=a@unstable.cc; prefer-encrypt=mutual; keydata=
 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
 Zr/o+Bj7j3NTN4WgbBNAsEeuVVpPG0I=
Message-ID: <44509c82-e60d-c94c-e686-faf08e0ec875@unstable.cc>
Date: Fri, 9 Aug 2019 10:26:24 +0200
MIME-Version: 1.0
In-Reply-To: <dc998970-a36c-cbb5-8de5-2ed2a3833d57@web.de>
Content-Type: multipart/signed; micalg=pgp-sha256;
 protocol="application/pgp-signature";
 boundary="pMny40ZXftePLb0kM9PvM3pVhEKYqg36i"
X-BeenThere: b.a.t.m.a.n@lists.open-mesh.org
X-Mailman-Version: 2.1.23
Precedence: list
List-Id: The list for a Better Approach To Mobile Ad-hoc Networking
 <b.a.t.m.a.n.lists.open-mesh.org>
List-Unsubscribe: <https://lists.open-mesh.org/mm/options/b.a.t.m.a.n>,
 <mailto:b.a.t.m.a.n-request@lists.open-mesh.org?subject=unsubscribe>
List-Archive: <http://lists.open-mesh.org/pipermail/b.a.t.m.a.n/>
List-Post: <mailto:b.a.t.m.a.n@lists.open-mesh.org>
List-Help: <mailto:b.a.t.m.a.n-request@lists.open-mesh.org?subject=help>
List-Subscribe: <https://lists.open-mesh.org/mm/listinfo/b.a.t.m.a.n>,
 <mailto:b.a.t.m.a.n-request@lists.open-mesh.org?subject=subscribe>
Reply-To: The list for a Better Approach To Mobile Ad-hoc Networking
 <b.a.t.m.a.n@lists.open-mesh.org>
Errors-To: b.a.t.m.a.n-bounces@lists.open-mesh.org
Sender: "B.A.T.M.A.N" <b.a.t.m.a.n-bounces@lists.open-mesh.org>

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--pMny40ZXftePLb0kM9PvM3pVhEKYqg36i
Content-Type: multipart/mixed; boundary="o6l2p4jw4F9qTmghCwgmIO0WpsW4p06bF";
 protected-headers="v1"
From: Antonio Quartulli <a@unstable.cc>
To: The list for a Better Approach To Mobile Ad-hoc Networking
 <b.a.t.m.a.n@lists.open-mesh.org>, Moritz Warning <moritzwarning@web.de>
Message-ID: <44509c82-e60d-c94c-e686-faf08e0ec875@unstable.cc>
Subject: Re: batman_v default throughput
References: <dc998970-a36c-cbb5-8de5-2ed2a3833d57@web.de>
In-Reply-To: <dc998970-a36c-cbb5-8de5-2ed2a3833d57@web.de>

--o6l2p4jw4F9qTmghCwgmIO0WpsW4p06bF
Content-Type: text/plain; charset=utf-8
Content-Language: en-US
Content-Transfer-Encoding: quoted-printable

Hi Moritz,

On 08/08/2019 23:05, Moritz Warning wrote:
> Hi,
>=20
> the Freifunk network in Ulm has a batman_V network of >80 nodes. [0]
>=20
> For the map, we use the link throughput value from batman-adv to calcul=
ate a link value (capped at 40 MBit/s for 100%).
> The default for VPN connections seem to be 1 MBit/s - when batman-adv d=
oesn't know the throughput from the driver.
>=20
> Is there a way to the set this throughput or can batman-adv measure it?=

>=20

I think we discussed this topic in all its details (with Marek) during
WMBv10, no?

However, if you need to refresh the concept, you can look at the
function that takes care of selecting the throughput:
batadv_v_elp_get_throughput() in bat_v_elp.c


The function is invoked for each neighbour/link across a given interface
and can be summarized as follows:
- if any throughput_override was set by the user for this iface, just
use this value;
- otherwise, if the iface is wifi, ask the wifi stack for the
expected-throughput (computed by minstrel for ath9k and other SoftMAC
drivers);
- otherwise, ask the ethtool module if there is a known link speed for
this iface;
- otherwise, if none of the above worked, use the default throughput
(1Mbps).


As also mentioned at WBMv10, Marek and I had worked on a patchset that
enables the tp_meter to measure the speed of a link, when no other
throughput is available (i.e. for VPN or other virtual links). The
patchset is still pending here [1].

We suggested you to manifest your interest about that patchset, so that
the discussion could move on, but it seemed you were not motivated
enough (at least back then).

Maybe you could take this chance to revive that thread? :-)


Cheers,


[1]
https://www.mail-archive.com/b.a.t.m.a.n@lists.open-mesh.org/msg17833.htm=
l


> Thanks!
>=20
> [0]: https://map11.freifunk-ulm.de/meshviewer
>=20

--=20
Antonio Quartulli


--o6l2p4jw4F9qTmghCwgmIO0WpsW4p06bF--

--pMny40ZXftePLb0kM9PvM3pVhEKYqg36i
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEE3o8ejP0lUW4GTX3J9FVsWUWDDm0FAl1NLjMACgkQ9FVsWUWD
Dm1J7g/+MMIZ7MKbzmLTwJe3NJz6+yRrkpUO0XzTD6QYzK1GQfPOYFYrCvGn7p1j
TMynLJyeNN1+xAk/W59F1mp8xrUQ13eOTxu+6kztxJcrADqjgnE6siWs0vKuVtdB
ZFQHmiil+w46QrlBWEUgQDk0m73r2XHSGCeNGOPQYqOogzlg4v4hHu5nI7TM6xQU
eVzROr2UBH5mqNdnp2QjTMQp/pR6vx7wWJuTWpdNKD2IW0s47QpKTjFB3A0F4rYG
wKdCBN9lZO/ALHAxW0g6so+RYnWOViZrZ8NDNSiw5b3zCo6j8RvZbkcSi3HMf5CG
1fA6nPoMZH7NzD9CJt7/IqfO7r870OWL7MEXN6a//CRIUVi0CgXFJNuFeaoPbbse
ySF6rprW7ir2O6VX1dxm5Fnkhx53qDVoZ0FRiP3O+IyzB8ce1etkKacHhE4qd4mQ
wfkMNnQ1F729+N3bLXBRXLjw/t3gffO38Cqr5f3AMgImW9tNEohRbhNKBxL3+VIf
nYVutnM4qdJLn5SkQimTDTgJLAYA3jrRm8vrYIvZPYLdZZ1gbj0QQW6t6iGA7Gc1
wmtHVCy82V/J42OPUA10E5eLiUJRboy7nK1zQquEtCws1QplODoPIpTFCGkxZ0kq
/+MUdOoDEBCvYpzU7/2hPea6O7f5rRW2NXlRKR3WstcUI050qHE=
=csha
-----END PGP SIGNATURE-----

--pMny40ZXftePLb0kM9PvM3pVhEKYqg36i--
